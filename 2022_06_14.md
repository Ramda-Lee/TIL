# Spring(인프런) - 컴포넌트 스캔

## 컴포넌트 스캔과 의존관계 주입
- 스프링 빈을 등록할 떄 자바 코드의 @Bean이나 XML을 통해서 설정정보를 등록하면 반복되는 과정과 오류의 위험성도 커지게된다.
- 스프링은 위와 같은 문제점을 방지하고 반복을 줄이기 위해 자동으로 스프링 빈을 등록하는 컴포넌트 스캔 기능을 제공한다.
- 의존관계를 자동으로 주입하는 @Autowired 기능도 제공한다.

## 사용법
- 컴포넌트 스캔을 사용하려는 클래스에 @ComponentScan 을 설정정보에 붙여준다
- 컴포넌트로 등록되야할 클래스들에 @Component Annotation을 붙인다.
- 생성자 위에 의존관계 주입 @Autowired Annotation을 붙인다.

## @ComponentScan
- @Component가 붙은 모든 클래스를 스프링 빈으로 자동 등록한다.
- 스프링 빈의 기본 이름은 클래스명을 사용하지만 맨 앞글자만 소문자로 한다.
- 생성자 @Autowired 지정하면, 스프링 컨테이너가 자동으로 해당 스프링 빈을 찾아서 주입한다.


## 탐색 위치와 기본 스캔 대상
- 모든 클래스를 스캔하면 시간적으로 손해이므로 필요한 위치부터 탐색하도록 시작위치를 지정할 수 있다.
- @ComponentScan (basePackage = "")와 같은 코드로 사용한다.
- 다만 최근 스프링 부트는 패키지 위치를 지정하지 않고, 설정 정보 클래스의 위치를 프로젝트 최상단에 두는 걸 추천한다.

## 중복 등록과 충돌
- 컴포넌트 스캔 시 동일한 이름이거나 자동 빈 등록이 되었는데 충돌이 발생하는 경우가 있다.
- 자동 빈 등록이 되는 경우끼리 충돌이 발생하면 -> ConflictingBeanDefinitionException 예외 발생한다.
- 수동 빈 등록과 자동 빈 등록 충돌이 발생하면 -> 수동 빈 등록이 우선권을 가져 자동 빈 등록된 걸 오버라이딩 해버린다.
- 이러한 에러는 정말 찾기 힘든 에러로 최근 스프링 부트는 두 가지 경우 다 에러가 뜨도록 변경됬다.

# 쿠버네티스

## Commands and Arguments

### Commands and Arguments in Docker

#### CMD
- 설명: 컨테이너 시작 시 기본 실행 명령 지정
- 특징: 커맨드라인에서 입력한 값이 CMD 전체를 대체
- 예시:
  ```
    CMD ["sleep", "5"]
    docker run image sleep 10 → sleep 10
  ```

#### ENTRYPOINT
- 설명: 컨테이너 시작 시 반드시 실행할 명령 지정
- 특징: 커맨드라인에서 입력한 값이 ENTRYPOINT 뒤에 추가
- 예시:
  ```
    ENTRYPOINT ["sleep"]
    docker run image 10 → sleep 10
  ```

#### CMD + ENTRYPOINT
- 설명: ENTRYPOINT에 고정 명령, CMD에 기본 인자 지정
- 특징: 인자를 주면 CMD 대신 사용, 안 주면 CMD 사용
- 예시:
  ```
    ENTRYPOINT ["sleep"]
    CMD ["5"]
    docker run image → sleep 5
    docker run image 10 → sleep 10
  ```

#### –entrypoint 옵션
- 설명: 런타임에서 ENTRYPOINT를 변경
- 특징: 기존 ENTRYPOINT 무시하고 지정한 명령 실행
- 예시:
  ```
    docker run --entrypoint sleep2.0 image 10 → sleep2.0 10
  ```

#### 동작 흐름
1.	CMD만 사용 → 커맨드라인 인자로 완전히 대체됨
2.	ENTRYPOINT만 사용 → 커맨드라인 인자가 뒤에 붙음
3.	CMD + ENTRYPOINT → 인자가 없으면 CMD 값 사용
4.	–entrypoint → ENTRYPOINT를 완전히 변경

### Commands and Arguments in Kubernetes

#### command
- Dockerfile 대응: ENTRYPOINT
- 역할: 컨테이너 시작 시 실행할 명령을 재정의
- 동작 예시:
  ```
    Dockerfile: ENTRYPOINT ["sleep"]
    Pod: command: ["sleep", "2.0"] → 실행: sleep 2.0
  ```

#### args
- Dockerfile 대응: CMD
- 역할: ENTRYPOINT에 전달할 기본 인자를 재정의
- 동작 예시:
  ```
    Dockerfile: ENTRYPOINT ["sleep"], CMD ["5"]
    Pod: args: ["10"] → 실행: sleep 10
  ```
#### 핵심 동작
1.	command → Dockerfile의 ENTRYPOINT를 덮어씀
2.	args → Dockerfile의 CMD를 덮어씀
3.	두 필드를 함께 쓰면 command 값 뒤에 args 값이 붙어 실행됨
4.	command는 CMD를 덮어쓰지 않음 (ENTRYPOINT만 덮어씀)

#### 예시
- Dockerfile
  ```
    ENTRYPOINT ["sleep"]
    CMD ["5"]
  ```
- Pod 정의 예시
  ```
    spec:
    containers:
      - name: ubuntu-sleeper
        image: ubuntu-sleeper
        args: ["10"]   # → sleep 10 실행
  ```
- 변경 예시
  ```
    spec:
    containers:
      - name: ubuntu-sleeper
        image: ubuntu-sleeper
        command: ["sleep", "2.0"]  # ENTRYPOINT 변경
        args: ["10"]               # → sleep 2.0 10 실행
  ```
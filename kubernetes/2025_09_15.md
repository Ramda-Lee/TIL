# 쿠버네티스

## Kubernetes TLS

### 인증서 종류
1. 서버 인증서
  - 서버가 본인을 증명할 때 사용
  - 예: apiserver.crt, etcd-server.crt, kubelet.crt
2. 루트 인증서
  - 인증기관(CA)이 서명할 때 사용
  - 예: ca.crt, ca.key
3. 클라이언트 인증서
  - 클라이언트가 본인을 증명할 때 사용
  - 예: admin.crt, schduler.crt, controller-manager.crt, kube-proxy.crt

### 파일 네이밍 규칙
- 공개키/인증키: .crt, .pem
- 개인키: key 포함

### 서버 컴포넌트 & 인증서
- kube-apiserver -> apiserver.crt, apiserver.key
- etcd -> etcd-server.crt, etcd-server.key
- kubelet (워커 노드) -> kubelet.crt, kubelet.key

### 클라이언트 컴포넌트 & 인증서
- Admin -> admin.crt, admin.key
- Scheduler -> scheduler.crt, scheduler.key
- Controller-manager -> controller-manager.crt, controller-manager.key
- kube-proxy -> kube-proxy.crt, kube-proxy.key

### 서버 간 통신
- API 서버 <-> etcd
  - API 서버는 etcd의 클라이언트 역할
  - 기존 인증서 사용 가능 / 별도 생성 가능
- API 서버 <-> Kubelet
  - API 서버는 Kubelet의 클라이언트 역할

### CA (Certificate Authority)
- Kubernetes는 최소 1개 CA 필요
- 경우에 따라 클러스터용 CA와 etcd 전용 CA를 분리할 수 있음
- CA 인증서와 키 -> ca.crt, ca.key
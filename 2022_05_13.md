# SQL 명령어 응용

## SELECT 문법 응용
- order by : 검색결과의 정렬
```
SELECT 컬럼 FROM 테이블명 WHERE 검색 조건 ORDER BY 컬럼 ASC(DESC)
```
ASC는 오름차순, DESC는 내림차순

- COUNT : 테이블에 포함 된 개수
```
SELECT COUNT(*) FROM 테이블명 WHERE 검색조건 (특정 조건에 맞는 테이블 테이터 수 세기)
```

- MIN, ,MAX, SUM, AVG : 테이블 연산
```
SELECT MIN(컬럼), MAX(컬럼), SUM(컬럼), AVG(컬럼) FROM 테이블명 WHERE 조건
```

- GROUP BY : 특정 필드를 기준으로 그룹화
```
SELECT 컬럼 FROM 테이블명 GROUP BY 컬럼
```
- LIMIT : 결과 중 일부 데이터만 가져오기
```
SELECT 컬럼 FROM 테이블명 LIMIT 2
```

## 명령어 순서
명령어들의 순서는  
SELECT  FROM WHERE GROUP BY ORDER BY LIMIT 순이다.  
이 순서를 지켜줘야 한다.

***

# 아키텍쳐

## 아키텍쳐란?

- 시스템을 만들기 위한 물리레벨의 조합을 아키텍쳐라한다.  
(서버의 기능, 저장소와 네트워크 기기의 조합 등)
- DB 설계에서 시스템의 구성
- 아키텍쳐를 통해 시스템의 용도와 목적 추측 가능

## IT 아키텍쳐
- 일정 기준과 절차에 따라 조직 전체의 정보화 구성요소를 통합 분석 후 그 관계를 구조적으로 정리한 체계  
(정보 시스템을 효율적으로 구성하기 위한 방법)

## 가용성과 확보성
- 가용성 : 정상적으로 사용가능한 정도  
가용성 = (정상사용시간/전체사용시간)*100

- 확장성 : 확장이 얼마나 쉽고 가능한지에 대한 용이성, DBMS의 확산이나 거대한 성장 도모

## 단일 장애점(SPOF)
- 시스템 구성요소 중에서, 동작하지 않으면 전체시스템이 중단되는 요소
- 높은 신뢰성을 요구하는 시스템은 단일 컴포넌트에 의존하지 않는 것이 좋다.(금융권 시스템)

## 신뢰성 vs 가용성
- 신뢰성 : 하드웨어나 소프트웨어가 고장나는 빈도, 컴포넌트 자체의 문제
- 가용성 : 사용자 입장에서 시스템을 어느정도 사용할 수 있는지, 시스템 전제 수준 문제

## DB서버의 다중화
- 다른 컴포넌트에 비해 다중화가 어려움
- 영속 계층의 특성
    - 데이터 장기간 보관 필요
    - 데이터 다중화 시 갱신 통한 정합성 중요
    - 일시적 처리만 담당하는 App Server

## 다중화 유형
- Active-Active : 두개의 DBMS 엔진서버의 가동 저장소는 1개
- Active-Standby : 평소에는 Active만 운용, 나머지 서버는 Standby 저장소 1개
- 디플리케이션 : DB서버와 저장소를 하나 세트로 하여 미리 준비, 데이터 동기화가 중요(운영 -> DR)  
저장소가 동시에 사용 불능일 때 서비스를 계속 할 수 있도록 해주는 아키텍쳐(주로 DR 시스템에 사용)

## 성능 추구를 위한 다중화
- Shared Disk
    - Active-Active DB 구성
    - 저장소 공유로 인한 병목 현상 발생
    - DB 서버 늘려도 한계점 도달함
- Shared Nothing
    - 서버와 저장소 세트를 늘려 병렬 처리
    - 세트를 늘린 것 만큼 비례하여 처리율 증가
    - DB 다운 시 다른 서버가 이어 받을 수 있는 커버팅 전략 필요

* Shared : DB나 웹 검색 엔진의 데이터 수평 분할

## 적합한 아키텍쳐 설계
- 최적의 아키텍처 설계 전략
    - 가용성, 신뢰성, 재해대책, 성능, 보안, 조직, 비용 등 다양한 조건 고려
    - 해당 비즈니스의 성장성이나 사용자의 유입 예측
    - 한번 구축 시 비용, 시간 소요
